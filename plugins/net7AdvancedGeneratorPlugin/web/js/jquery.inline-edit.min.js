/*
 * Inline Text Editing 1.3
 * April 26, 2010
 * Corey Hart @ http://www.codenothing.com
 */ 
(function(a,b){a.fn.inlineEdit=function(c){return this.each(function(){var l=this,f=a(l),g,h=a.extend({href:"ajax.php",requestType:"POST",html:true,load:b,display:".display",form:".form",text:".text",save:".save",cancel:".cancel",revert:".revert",loadtxt:"Loading...",hover:b,postVar:"text",postData:{},postFormat:b},c||{},a.metadata?f.metadata():{}),d=f.find(h.display),m=f.find(h.form),k=m.find(h.text),j=m.find(h.save),e=m.find(h.revert),i=m.find(h.cancel);if(a.data(l,"inline-edit")===true){return}a.data(l,"inline-edit",true);m.bind("submit.inline-edit",function(){j.trigger("click.inline-edit");return false});d.bind("click.inline-edit",function(){d.hide();m.show();if(h.html){if(g===b){g=d.html()}k.val(g).focus()}else{if(g===b){g=k.val()}}return false}).bind("mouseenter.inline-edit",function(){d.addClass(h.hover)}).bind("mouseleave.inline-edit",function(){d.removeClass(h.hover)});e.bind("click.inline-edit",function(){k.val(g||"").focus();return false});i.bind("click.inline-edit",function(){m.hide();d.show();if(d.hasClass(h.hover)){d.removeClass(h.hover)}return false});j.bind("click.inline-edit",function(n){h.postData[h.postVar]=k.val();m.hide();d.html(h.loadtxt).show();if(d.hasClass(h.hover)){d.removeClass(h.hover)}a.ajax({url:h.href,type:h.requestType,data:h.postFormat?h.postFormat.call(f,n,{settings:h,postData:h.postData}):h.postData,success:function(o){g=b;if(h.load){h.load.call(d,n,{response:o,settings:h});return}d.html(o)}});return false})})}})(jQuery);